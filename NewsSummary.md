
# 概述：
在前面的专题中，已经完成了新闻管理系统项目；  
在本专题中，对这个项目进行一个总结，并对该系统的结构进行分析；  

### 系统功能总结
完成新闻管理系统这个项目，我们首先使用实体类和DAO类封装了数据库操作；基于这些功能，我们又实现了分页查询和新闻添加； 
在新闻添加中，使用到了第三方控件ckeditor；   
接下来，我们使用EL和JSTL表达式代替java小脚本显示新闻信息；  
还使用了Servlet代替`doAdd.jsp`页面来保存信息。     
在Servlet基础上，我们使用监听器管理网站访问人数，使用过滤器过滤字符乱码；   
这些都是我们在新闻管理系统中所完成的功能以及我们所学到的技能；    


### 系统结构分析（一）
在新闻管理系统中我们写了很多类，那这些类分别实现了什么功能，他们之间又都是怎么协同工作的呢？  

先看 BaseDao类：     
它负责直接和数据库交互；创建连接、执行sql语句就是它的主要功能；需要注意：它是所有Dao类的基类，它的性能好坏，功能强大与否，将直接影响整个项目。     
在编写的时候还有那些细节需要注意呢？   
小经验：   
BaseDao应该实行增删改查、支持参数、能调用存储过程、能及时关闭资源等功能。   

BaseDao有很多Dao子类，对于数据库的每张表，我们都要创建一个Dao类，用来实现对该表的增删改查等操作；  
例如：NewsDaoImpl的功能就是操作数据库中的news_detail表；该类继承BaseDao，这使得它可以调用父类BaseDao的方法来实现增删改查操作；    
小经验：   
对于NewsDaoImpl类，我们还为它抽象了NewsDao接口；  
使得方法调用与方法实现分离开，能提高程序的可扩展性；  

### 系统结构分析（二）
我们项目中NewsServiceImpl又叫业务类，封装了与新闻相关的业务逻辑；由于该系统业务设计的比较简单，所以其中代码并不复杂；   
很容易混淆NewsServiceImpl与NewsDaoImpl，它们的功能是不同的；  
#### Dao和Service的区别：   
Dao实现数据库操作，Service调用Dao实现业务逻辑；  
比如：删除新闻的同时，还需要删除该新闻的评论；这个业务流程是在NewsServiceImpl类中实现；   
对于NewsServiceImpl类也可以抽象出NewsService接口来提高程序扩展性；   
JSP页面类用来展示数据，并与用户进行交互；展示数据的时候，大家要尽量避免使用java小脚本，而要使用EL和JSTL，这样可以提高代码的可读性；   
小经验：   
对于复杂的JSP页面，我们可以把复杂的JSP页面拆分成多个部分单独实现，这样做能简化代码，还能实现页面复用。被复用的页面要使用绝对路径。      
例如：分页功能条页面就实现了复用效果；  

值得注意的是：   
被复用的页面中一定要使用绝对路径引用资源，以防止出现路径错误；  
JSP页面类可以通过嵌入java代码的方式调用Service来实现业务；但这不是最好的做法，当业务流程或页面跳转流程比较复杂的时候，该方式就会导致流程控制代码难于编写；这时候，我们就需要把这些流程控制代码单独封装到Servlet类中了；所以，Servlet的基本功能就是接收请求，并调用业务类处理请求、转发结果；   


### 系统结构分析（三）
在新闻管理系统中有很多类和接口；  
其中，BaseDao、NewsDao接口、NewsDaoImpl的功能都与数据库操作相关；  
NewsService接口、NewsServiceImpl用来处理业务逻辑，   
他们之间传递数据的载体是News等实体类的对象或集合；   
这些类组合在一起就实现了系统的业务逻辑和数据处理；  
我们把他们都叫做JavaBean；   
JavaBean，再加上Servlet和JSP页面，这就是一个`JavaBean+Servlet+JSP`的项目结构；  
这种模式能很好的适用于B/S应用程序；   



## 初识MVC
系统的处理流程：  
用户提交表单后，由Servlet接收请求，并调用JavaBean实现业务，JavaBean中的Service类，Dao类，以及实体类协同工作，完成了保存新闻信息的功能；   
保存成功后，Servlet再调用JSP页面显示新闻列表，并发送至浏览器；这样，整个请求过程就完成了；  
其实，这种JavaBean+Servlet+JSP的设计模式，就是MVC设计模式的一种实现；   
### 什么是MVC设计模式：  
MVC又叫模型-视图-控制器模式；  
它将应用程序分为3个不同的基本部分：  
#### 模型：  
又叫Model，实现数据操作和业务处理，它对应的组件就是JavaBean；  
模型能够提供和处理数据，它的代码能够被其他组件调用，达到了代码重用的目的；  
#### 视图：
又叫View，是显示信息，与用户交互的界面，它对应的组件是JSP页面或HTML文件；视图一般不处理用户的请求，它只显示数据并接收用户的操作；   
#### 控制器：
又叫Controller，它的作用是接收请求，调用模型实现业务，调用视图显示数据，最终完成请求；  
它对应的组件是Servlet；   
控制器本身不处理数据，也不显示数据；它只是封装了一个合理的调用流程来完成请求。  
当业务流程很简单的时候，可以把控制器的功能交给视图来实现，这种模式叫Model1；   
所以，Model1只有视图和模型，没有控制器。当业务流程复杂的时候，就需要把这些流程控制交给控制器来实现，这种模式叫Model2；所以，Model2其实就是MVC模式；不过，Model2是MVC模式的一种简单实现；   
当MVC模式和各种高级框架结合之后，才能充分发挥出它的强大威力；   
