## 获取表单提交的数据：
我们在网页的表单中填入数据，提交表单后，数据被提交到哪里去了：    
其实，我们可以把表单提交到服务器上的JSP来处理，让JSP来做后续的工作；JSP会从请求中得到表单提交来的数据，接下来可以做进一步的加工处理；处理完成后，会给客户端浏览器一个响应，浏览器就会根据响应把结果显示给用户；    
##### JSP是怎么从请求中获得表单提交的数据：    
在JSP中有一个对象叫"request",就是"请求"对象；  
它会帮我们把表单中的数据取出来；   
#### request对象有一个方法：
```
public String getParameter(String name)
```
这个方法可以从请求中获取参数，这里的参数是来自表单提交的数据；  
该方法有一个String类型的参数name,用于指定要获取的参数的名字；   
比如：表单中有一个文本框是这样的，   
```
<input type="text" name="userName">
```
我们就可以在JSP中使用下面的JSP代码得到名为userName的文本框提交的数据：  
```
String userName=request.getParameter("userName");
```
getParameter这个方法的返回值是String；   
如果getParameter方法取不到对应名字的参数，则会返回null；   

### get和post的区别：
- get方式提交表单，参数会出现在URL中，而post则不会；   
- 浏览器对URL的长度是有限制的，但不同厂家的浏览器对长度限制又不太一样，所以我们用get方式提交数据的时候要注意，产生的url长度不能太长；而post方式提交数据的时候，理论上没有长度的限制，可携带的数据量要比get方式多；    
- 从安全性的角度来看，get方式提交的数据是以明文的方式直接出现在URL中，如果在传输的过程中被截获，别人就会轻易的得知我们使用的数据，所以安全性差，不适合传递机密的数据；    
而post请求的参数不体现在url中，要比get请求更安全；所以，提交密码之类的机密数据时要使用post；    
- get请求有利于保存URL，保存的URL可再次访问，也可在网络中传播使用；比如通过邮件或QQ把某个新闻的URL发给好友查看，好友可以看到与你相同的新闻；   
post请求对应的url不具有可保存再次访问的特点，也不利于在网络中传播给其他人使用；     

### 获取同名的多个参数：
有时候在表单中需要提交多个name相同的元素值；   
比如，通过复选框的方式选择删除多封邮件，这时需要使用request对象的getParameterValues方法获取数据；   
即：    
```
request.getParameterValues();
```

这个方法的返回结果是数组，通过循环数组可以获得提交的多个数据；   

### 内置对象：
request对象其实是JSP提供的一个内置对象；   
内置对象不需要声明和实例化，这些可以直接使用的对象就是内置对象；   
请求对象：request 和 输出对象：out，以及响应对象： response 都是内置对象；   

### 中文乱码：
提交中文的数据到JSP页面中会出现乱码的问题：  
这是一个字符编码的问题；   
JSP中默认使用的字符编码方式是iso-8859-1，这种编码方式是不支持中文的；   
常见的支持中文的编码方式有：      
gb2312  gbk  utf-8    

|编码方式 |               收录的字符|
|----|----|
|gb2312|仅收录了常用的简体汉字；|
|gbk |收录了比gb2312更多的汉字，包括简体和繁体的汉字|
|utf-8 |包含全世界所有国家需要用的字符，是国际编码，通用性强；现在大多采用utf-8这种编码方式；|

#### 解决中文乱码问题：   
解决乱码问题需要设置请求和响应的编码方式；   
设置请求的编码方式使用语句：   
```
request.setCharacterEncoding("utf-8");
```

设置响应的编码方式使用语句：   
```
response.setCharacterEncoding("utf-8");
```
如果在页面page指令里，已经对contentType中的charset设置了编码方式的话，   
```java
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
```
那么，`request.setCharacterEncoding("utf-8")`;就可以省略了；因为这两种都是设置响应的编码方式；   
通过这种设置方式，post请求的乱码问题就已经能解决了；    
#### get请求出现乱码：
有两种方法可以解决：   
- 治标的方法：
适用于解决少数几处的乱码；   
使用语句：    
```
new String(s.getBytes("iso_8859-1"),"utf-8")
```
其中，s变量保存的是，请求中取出的乱码的中文；   

- 治本的方法：
如果我们使用的是Tomcat服务器的话，它可以一劳永逸的解决get请求的乱码；   
解决方法是：    
```
在tomcat目录中找到conf文件夹中的server.xml文件；
进行如下的设置，把URIEcoding的值设置为utf-8;
<Connector connectionTimeout="20000" port="8080"
protocol="HTTP/1.1" redirectPort="8443"
URIEcoding="UTF-8"/>
```

### 在请求中存取属性：
在请求对象request中以属性的方式保存数据，一般会把针对于本次请求产生的一些临时数据放入请求对象中；然后可以携带请求对象转移到另外的页面进行下一步的工作；    
在请求中以属性的方式保存数据时，使用的是请求对象的setAttribute方法：   
```
public void setAttribute(String name,Object o)
```

第一个参数是String类型的属性名；   
第二个参数是Object类型的属性值；   
所以，只要是引用类型的对象都可以存到这里；    
比如：一个字符串、一个新闻的对象、一个数组、一个集合等等；   
调用很简单，比如：    
```
request.setAttribute("mess","注册失败");
```
这条语句就是把"注册失败"这个字符串，用属性名"mess"保存到了请求对象中；   
 
#### 保存后，在请求中获取属性： 
使用的是getAttribute方法：   
```
public Object getAttribute(String name)
```
这个方法有一个String类型的参数，返回值是Object类型；获取属性的时候，我们可以使用String类型的属性名，从请求中取出对应的Object类型的属性值。   
注意：   
- 如果请求对象中没有与参数对应的属性名，这个方法会返回null值，所以在使用这个属性值的时候要做非空判断，否则会出现空指针异常。   
- 它的返回值类型是Object类型，而你当初存入的类型可能是字符串或者是集合等一些其他类型的数据。这时就需要做数据类型的转换。
示例：   
```java
String mess=request.getAttribute("mess");
mess.length();
```
这种写法是错误的，推荐写法：   
```java
String mess=(String)request.getAttribute("mess");
if(mess!=null){
//在请求只能够取到"mess"属性对应的属性值，正常使用mess数据} else {
//在请求中没有取到"mess"属性对应的属性值，使用备选方案}
```

#### 转发与重定向：
- 转发：
`request.getRequestDispatchar("url").forward(request,response)`   

- 重定向：
`response.sendRedirect("url")`

##### 转发的工作方式：
当客户端请求提交到服务器的JSP处理的时候，这个JSP可以携带请求和响应对象转移到本web应用的另一处进行处理；在另一处处理结束后，产生结果页面响应给客户端浏览器，此时客户端浏览器可以看到结果也，但URL并没有变化；所以浏览器不知道服务器端是几个地方联合工作后才产生的本次请求的结果；   
#### 重定向的工作方式：
当客户端浏览器提交请求到服务器的JSP处理的时候，这个JSP给客户端的响应是： "你去请求另外一处URL吧！"
此时，客户端浏览器会再次发出一个新的请求到这个新的URL地址；新的URL地址负责为浏览器产生响应；
这时，浏览器看到的URL是第二次请求所对应的URL地址；   

##### 这两种页面跳转的方式到底有哪些区别：
使用转发时URL不变，而重定向时URL会有变化；   
使用转发时，对于客户端来说并没有再次发出请求；    
重定向时客户端会重新发出请求；    
转发时，可携带请求，在另一处可以继续使用请求中的数据；   
重定向时，原"请求"不再可用；   
转发的目标URL只能是本Web应用的另一处，不能是本Web应用以外的URL;
重定向的地址可以是任意的URL，也就是说不一定是本Web应用的URL；

使用情况：
如果需要在请求中携带针对于本次请求的数据，就应该使用转发；
如果不需要在请求中携带数据，就可以使用重定向；